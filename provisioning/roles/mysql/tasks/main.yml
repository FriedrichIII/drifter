- name: set mysql root password via debconf
  debconf: name=mysql-server-5.5 question='mysql-server/root_password'  value='root' vtype='password'

- name: set mysql root password confirmation via debconf
  debconf: name=mysql-server-5.5 question='mysql-server/root_password_again'  value='root' vtype='password'

- name: install mysql 5.5
  apt: pkg=mysql-server-5.5 state=present

- name: install python-mysqldb (for ansible)
  apt: pkg=python-mysqldb state=present

- name: create my.cnf config for root
  template: src=my.cnf.j2 dest=/root/.my.cnf

- name: ensure mysql is started
  action: service name=mysql state=started

- name: create database user
  mysql_user: name={{ database_user }} password={{ database_password }} priv=*.*:ALL,GRANT state=present

- name: create database
  mysql_db: name={{ database_name }} state=present
